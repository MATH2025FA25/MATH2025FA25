{
  "hash": "da8831264403cb583676a6a5e35eb515",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 12: Categorical Predictors\"\nsubtitle: \"Pee-to-Peer Loans\"\neditor: visual\n---\n\n\n\n\n\n::: callout-important\n-   Open [RStudio](https://rstudio.collegeofidaho.edu/) and create a subfolder in your AE folder called \"AE-12\".\n\n-   Go to the [Canvas](https://cofi.instructure.com/courses/15692/assignments/183202) and locate your `AE-12` assignment to get started.\n\n-   Upload the `ae-12.qmd` file into the folder you just created. The `.qmd` and PDF responses are due in Canvas. You can check the due date on the Canvas assignment.\n:::\n\n## Packages + data\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggformula)\nlibrary(mosaic)\nlibrary(broom)\nlibrary(knitr)\nlibrary(openintro)\n\nloan50 <- loan50 |>\n  mutate(annual_income_k = annual_income / 1000)\n```\n:::\n\n\n\n\n\nThe data for this AE is is a sample of 10,000 loans made through a peer-to-peer lending club. The data is in the `loan50` data frame in the **openintro** R package.\n\n## Variables\n\n-   `annual_income_k`: Annual income in \\$1,000's\n-   `verified_income`: Whether borrower's income source and amount have been verified (`Not Verified`, `Source Verified`, `Verified`)\n\n**Response**: `interest_rate`: Interest rate for the loan\n\n## Analysis goal\n\n-   Predict `interest_rate` using the categorical variable `verified_income` as a predictor\n-   Include other quantitative variables and understand how they interact with `verified_income`\n\n## Exercise 1\n\nGenerate side-by-side boxplots of `interest_rate` vs. `verified_income`. Does it appear that there is a relationship between the two variables?\n\n## Exercise 2\n\nBased on the output of the code below, what do you think would be the best predictions for the interest rate of a borrow with `Not Verified`, `Source Verified`, and `Verified` income, respectively.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfavstats(interest_rate ~ verified_income, data = loan50) |> \n  kable()\n```\n\n::: {.cell-output-display}\n\n\n|verified_income |  min|      Q1| median|      Q3|   max|      mean|       sd|  n| missing|\n|:---------------|----:|-------:|------:|-------:|-----:|---------:|--------:|--:|-------:|\n|                |   NA|      NA|     NA|      NA|    NA|       NaN|       NA|  0|       0|\n|Not Verified    | 5.31|  7.9600|   9.44|  9.9300| 18.45|  9.541429| 2.984269| 21|       0|\n|Source Verified | 6.08|  7.8075|  10.91| 16.2875| 19.42| 11.765500| 4.270998| 20|       0|\n|Verified        | 5.32| 11.9800|  14.08| 21.4500| 26.30| 15.853333| 7.694652|  9|       0|\n\n\n:::\n:::\n\n\n\n\n\n## Exercise 3\n\nFit a linear model predicting `interest_rate` from `verified_income`. What is the reference level for `verified_income`?\n\n## Exercise 4\n\nWITHOUT WRITING ANY CODE except for addition, subtraction, multiplication, and addition, what would the model predict the average `interest_rate` for each of the three levels of `verified_income`? How do these answers compare to your answers from Exercise 2?\n\n## Exercise 5\n\nThe linear model below predicts `interest_rate` from `annual_income_k`. Add `verified_income` as a predictor to this model. Do not include an interaction term. Be prepared to discuss how and why the plot changes when you add in `verified_income`. \n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nex5_model <- lm(interest_rate ~ annual_income_k, data = loan50) \nex5_model |> \n  tidy() |> \n  kable()\n```\n\n::: {.cell-output-display}\n\n\n|term            |  estimate| std.error| statistic|   p.value|\n|:---------------|---------:|---------:|---------:|---------:|\n|(Intercept)     | 12.994265| 1.2851395| 10.111171| 0.0000000|\n|annual_income_k | -0.016561| 0.0124397| -1.331308| 0.1893763|\n\n\n:::\n\n```{.r .cell-code}\nplotModel(ex5_model) # nifty function from the mosaic package\n```\n\n::: {.cell-output-display}\n![](ae-12-categorical-predictors_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Exercise 6\n\nHow do you think the plot above will change if you add in an interaction term between `verified_income` and `interest_rate`? **AFTER** thinking about it, add in an interaction term between `verified_income` and `annual_income_k`. \n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nex6_model <- lm(interest_rate ~ annual_income_k, data = loan50) \nex6_model |> \n  tidy() |> \n  kable()\n```\n\n::: {.cell-output-display}\n\n\n|term            |  estimate| std.error| statistic|   p.value|\n|:---------------|---------:|---------:|---------:|---------:|\n|(Intercept)     | 12.994265| 1.2851395| 10.111171| 0.0000000|\n|annual_income_k | -0.016561| 0.0124397| -1.331308| 0.1893763|\n\n\n:::\n\n```{.r .cell-code}\nplotModel(ex6_model) # nifty function from the mosaic package\n```\n\n::: {.cell-output-display}\n![](ae-12-categorical-predictors_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Exercise 7\n\nBased on the model above (and the equation on the slides):\n\n-  Write the equation of the model to predict interest rate for applicants with *Not Verified* income.\n-  Write the equation of the model to predict interest rate for applicants with *Verified* income.\n-  Our degrees of freedom will be $n-p-1$. What is $p$ in this case? Hint: it isn't 2.\n\n## To submit the AE\n\n::: callout-important\n-   Render the document to produce the PDF with all of your work from today's class.\n-   Upload your QMD and PDF files to the Canvas assignment.\n:::\n",
    "supporting": [
      "ae-12-categorical-predictors_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}