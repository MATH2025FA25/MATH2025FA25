{
  "hash": "3d12ed089ba0bec14f4d36a4bcff4754",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 11: Model Comparison\"\neditor: visual\nformat:\n  html:\n    embed-resources: true\n---\n\n\n\n::: callout-important\n-   Open [RStudio](https://rstudio.collegeofidaho.edu/) and create a subfolder in your AE folder called \"AE-11\".\n\n-   Go to the [Canvas](https://cofi.instructure.com/courses/15692/assignments/183786) and locate your `AE-11` assignment to get started.\n\n-   Upload the `ae-11.qmd` and `tip-data.csv` files into the folder you just created. The `.qmd` and PDF responses are due in Canvas. You can check the due date on the Canvas assignment.\n:::\n\n## Packages + data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(yardstick)\nlibrary(ggformula)\nlibrary(patchwork)\nlibrary(knitr)\nlibrary(kableExtra)\n\ntips <- read_csv(\"../data/tip-data.csv\") |> \n  select(-`Tip Percentage`, -`W/Tip`)\n```\n:::\n\n\n\nWhat factors are associated with the amount customers tip at a restaurant? To answer this question, we will use data collected in 2011 by a student at St. Olaf who worked at a local restaurant.[^1]\n\n[^1]: Dahlquist, Samantha, and Jin Dong. 2011. \"The Effects of Credit Cards on Tipping.\" Project for Statistics 212-Statistics for the Sciences, St. Olaf College.\n\nThe variables we'll focus on for this analysis are\n\n-   `Tip`: amount of the tip\n-   `Party`: Number of people in the party\n-   `Meal`: Time of day (`Lunch`, `Dinner`, `Late Night`)\n-   `Age`: Age category of person paying the bill (`Yadult`, `Middle`, `SenCit`)\n-   `Day`: Day of the week\n-   `Payment`: the type of payment used\n-   `GiftCard`: whether a gift card was used\\\n-   `Comps`: Whether any food was comped\\\n-   `Alcohol`: Whether any alcohol was ordered\n-   `Bday`: whether it was someones birthday\\\n-   `Bill`: the size of the bill\n\n## Analysis goal\n\nThe goals of this activity are to:\n\n-   Use ANOVA to determine whether our model is useful as a whole\n-   Begin thinking about $R^2$ in a multivariate setting\n\n## Exercise 0\n\nComplete the following to clean and then observe your data:\n\n1.  Use `drop_na` to remove any rows where `Party` is missing.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntips <- tips |> \n  _______   # drop missing values from party\n```\n:::\n\n\n\n2.  Generate a bar chart of the variable `Meal`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# insert code here\n```\n:::\n\n\n\n3.  Run the following code and generate the same bar chart as above. You can even copy and paste your code. What's the difference between the two plots? What do you think `fct_relevel` does?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntips <- tips |> \n  mutate(\n    Meal = fct_relevel(Meal, \"Lunch\", \"Dinner\", \"Late Night\"),\n    Age  = fct_relevel(Age, \"Yadult\", \"Middle\", \"SenCit\")\n  )\n\n# Generate plot here\n```\n:::\n\n\n\n## Exercise 1\n\nFir a model called `tip_fit_1` to predict `Tip` from `Party`, `Age`, and `Meal`\n\n## Exercise 2\n\nPipe the model you generated in the previous Exercise into the function `anova`.\n\n## Exercise 3\n\nBased on the output above, compute $SSTotal$, $SSError$, and $SSModel$. You should only need to use addition and/or subtraction.\n\n## Exercise 4\n\nPipe your model into the `glance` function. Identify, the F-statistic and p-value for an F-test of this model. Interpret the outcome of your test in the context of the problem. Be prepared to discuss the difference between this p-value and the p-values from the individual model coefficients.\n\n## Exercise 5\n\nFit a model `tip_fit_2` to predict `Tip` from `Party`, `Age`, `Meal`, and `Day`.\n\n## Exercise 6\n\nOf the two models you just fit, which is nested inside the other?\n\n## Exercise 7\n\nFit a third model called `tip_fit_3` so that `tip_fit_1` is nested inside `tip_fit_3`. Try to choose a model that you think will do a better job than `tip_fit_1` of modeling the data. Feel free to include interaction or polynomial terms. Have your reporter write the model on the board.\n\n## Exercise 8\n\nChange `eval: FALSE` to `eval: TRUE`. Alter the code below so that you're comparing `tip_fit_3` to `tip_fit_1`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nanova(tip_fit_1, tip_fit_2) |> # Enter reduced model first\n  tidy() |> \n  kable()\n```\n:::\n\n\n\nWrite down the hypotheses, test statistic, and p-value of your test. Interpret the output in the context of the problem. Have your reporter write the p-value on the board. \n\n## Exercise 9\n\nBased on your test, choose `tip_fit_1` or `tip_fit_3`. What is the $R^2$ value for this model?\n\n## Exercise 10\n\nFit the full model. What is it's $R^2$? Does this model have a higher or lower $R^2$ than the previous model? Does this mean it is a better model? Be prepared to discuss.\n\n## Exercise 11\n\nThe following code converts the numerical variable `Bill` into a new categorical variable `Bill_factor`. Essentially, each different number in `Bill` is treated as it's own category. Fit a model predicting `Tip` from `Bill_factor`. What is your `R^2`? Think about the implications of this and what it means for the usefulness of $R^2$.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntips <- tips |> \n  mutate(Bill_factor = factor(Bill))\n```\n:::\n\n\n\n## Exercise 12\n\nApply `glance` to both models above to find the $R^2$ and $R^2_{adj}$ values?\n\n## Exercise 13\n\n1.  Which model would we choose based on $R^2$?\n2.  Which model would we choose based on Adjusted $R^2$?\n3.  Which statistic should we use to choose the final model - $R^2$ or Adjusted $R^2$? Why?\n\n## Exercise 14\n\nReference the output from Exercise 9.\n\n1.  Which model would we choose based on AIC?\n\n2.  Which model would we choose based on BIC?\n\n## Exercise 15\n\nNavigate to the website for `olsrr` [here](https://olsrr.rsquaredacademy.com/reference/). Choose a selection technique other than best subset and apply it. Fit your resulting model.\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## To submit the AE\n\n::: callout-important\n-   Render the document to produce the PDF with all of your work from today's class.\n-   Upload your QMD and PDF files to the Canvas assignment.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}