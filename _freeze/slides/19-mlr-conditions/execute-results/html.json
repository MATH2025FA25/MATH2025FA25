{
  "hash": "824e5de9e85ec47d638c3dc2f579bfc2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"MLR: Conditions\"\nauthor: \"Prof. Eric Friedlander\"\ndate: \"2024-10-21\"\ndate-format: \"MMM DD, YYYY\"\nfooter: \"[ðŸ”— MAT 212 - Fall 2024 -  Schedule](https://mat212fa24.netlify.app/schedule)\"\nlogo: \"../images/logo.png\"\nformat: \n  revealjs:\n    theme: slides.scss\n    multiplex: false\n    transition: fade\n    slide-number: false\n    incremental: false \n    chalkboard: true\nhtml-math-method:\n  method: mathjax\n  url: \"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"\nexecute:\n  freeze: auto\n  echo: true\n  cache: false\nknitr:\n  opts_chunk: \n    R.options:      \n    width: 200\nbibliography: references.bib\n---\n\n\n\n\n\n\n## Announcements\n\n-   Project: EDA Due Wednesday, October 30th\n-   Oral R Quiz (time to start scheduling it)\n\n::: appex\nðŸ“‹ [AE 13 - Rail Trails](https://mat212fa24.netlify.app/ae/ae-13-mlr-conditions)\n\n- Open up AE 13\n:::\n\n\n## Topics\n\n::: nonincremental\n-   Checking model conditions\n:::\n\n## Computational setup\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(mosaic)\nlibrary(mosaicData)\nlibrary(patchwork)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(scales)\nlibrary(countdown)\nlibrary(rms)\n\n# set default theme and larger font size for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 16))\n```\n:::\n\n\n\n\n\n## Data: `rail_trail` {.smaller}\n\n::: nonincremental\n-   The Pioneer Valley Planning Commission (PVPC) collected data for ninety days from April 5, 2005 to November 15, 2005.\n-   Data collectors set up a laser sensor, with breaks in the laser beam recording when a rail-trail user passed the data collection station.\n:::\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 90 Ã— 7\n   volume hightemp avgtemp season cloudcover precip day_type\n    <dbl>    <dbl>   <dbl> <chr>       <dbl>  <dbl> <chr>   \n 1    501       83    66.5 Summer       7.60 0      Weekday \n 2    419       73    61   Summer       6.30 0.290  Weekday \n 3    397       74    63   Spring       7.5  0.320  Weekday \n 4    385       95    78   Summer       2.60 0      Weekend \n 5    200       44    48   Spring      10    0.140  Weekday \n 6    375       69    61.5 Spring       6.60 0.0200 Weekday \n 7    417       66    52.5 Spring       2.40 0      Weekday \n 8    629       66    52   Spring       0    0      Weekend \n 9    533       80    67.5 Summer       3.80 0      Weekend \n10    547       79    62   Summer       4.10 0      Weekday \n# â„¹ 80 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\nSource: [Pioneer Valley Planning Commission](http://www.fvgreenway.org/pdfs/Northampton-Bikepath-Volume-Counts%20_05_LTA.pdf) via the **mosaicData** package.\n\n\n# Conditions for inference\n\n## Full model\n\nComplete Exercise 0 to fit the so-called \"full-model\".\n\n## Full model\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n\n|term            |   estimate| std.error|  statistic|   p.value|\n|:---------------|----------:|---------:|----------:|---------:|\n|(Intercept)     |  17.622161| 76.582860|  0.2301058| 0.8185826|\n|hightemp        |   7.070528|  2.420523|  2.9210743| 0.0045045|\n|avgtemp         |  -2.036685|  3.142113| -0.6481896| 0.5186733|\n|seasonSpring    |  35.914983| 32.992762|  1.0885716| 0.2795319|\n|seasonSummer    |  24.153571| 52.810486|  0.4573632| 0.6486195|\n|cloudcover      |  -7.251776|  3.843071| -1.8869743| 0.0627025|\n|precip          | -95.696525| 42.573359| -2.2478030| 0.0272735|\n|day_typeWeekend |  35.903750| 22.429056|  1.6007696| 0.1132738|\n\n\n:::\n:::\n\n\n\n\n\n## Model conditions\n\nOur model conditions are the same as they were with SLR:\n\n1.  **Linearity:** There is a linear relationship between the response and predictor variables.\n\n2.  **Constant Variance:** The variability about the least squares line is generally constant.\n\n3.  **Normality:** The distribution of the residuals is approximately normal.\n\n4.  **Independence:** The residuals are independent from each other.\n\n\n## Checking Linearity\n\n-   Look at a plot of the residuals vs. predicted values\n\n-   Look at a plot of the residuals vs. each predictor\n\n    +   Use scatter plots for quantitative and boxplots of categorical predictors\n\n-   Linearity is met if there is no discernible pattern in each of these plots\n\nComplete Exercises 1-4\n\n## Residuals vs. predicted values\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](19-mlr-conditions_files/figure-revealjs/main_res_pred-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Residuals vs. each predictor\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](19-mlr-conditions_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Checking linearity\n\n-   The plot of the residuals vs. predicted values looked OK\n\n-   The plots of residuals vs. `hightemp` and `avgtemp` appear to have a parabolic pattern.\n\n-   The linearity condition does not appear to be satisfied given these plots.\n\n. . .\n\n::: question\nGiven this conclusion, what might be a next step in the analysis?\n:::\n\n## Checking constant variance\n\n::: question\nDoes the constant variance condition appear to be satisfied?\n:::\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](19-mlr-conditions_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Checking constant variance\n\n-   The vertical spread of the residuals is not constant across the plot.\n\n-   The constant variance condition is not satisfied.\n\n. . .\n\n::: question\nGiven this conclusion, what might be a next step in the analysis?\n:::\n\nComplete Exercises 5-6.\n\n## Checking normality\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](19-mlr-conditions_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\nThe distribution of the residuals is approximately unimodal and symmetric, so the normality condition is satisfied. The sample size 90 is sufficiently large to relax this condition if it was not satisfied.\n\n## Checking independence\n\n-   We can often check the independence condition based on the context of the data and how the observations were collected.\n\n-   If the data were collected in a particular order, examine a scatter plot of the residuals versus order in which the data were collected.\n\n-   If there is a grouping variable lurking in the background, check the residuals based on that grouping variable.\n\n-   Why might the independence condition be violated here? \n\n## Checking independence {.midi}\n\nResiduals vs. order of data collection:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\ngf_line(.resid ~ 1:nrow(rt_full_aug), data = rt_full_aug) |>\n  gf_point()  |>\n  gf_hline(yintercept = 0, color = \"red\", linetype = \"dashed\")  |>\n  gf_labs(x = \"Order of data collection\", y = \"Residuals\")\n```\n\n::: {.cell-output-display}\n![](19-mlr-conditions_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=3000}\n:::\n:::\n",
    "supporting": [
      "19-mlr-conditions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}